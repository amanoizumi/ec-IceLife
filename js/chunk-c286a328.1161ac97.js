(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c286a328"],{"047c":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"bottom-right shadow",on:{click:t.scrollTop}},[e("i",{staticClass:"fas fa-chevron-up d-flex"})])},s=[],n={name:"ScrollTopArrow",data:function(){return{visible:!1}},methods:{scrollTop:function(){var t=this;this.intervalId=setInterval((function(){0===window.pageYOffset&&clearInterval(t.intervalId),window.scroll(0,window.pageYOffset-50)}),10)},scrollListener:function(){this.visible=window.scrollY>150}},mounted:function(){window.addEventListener("scroll",this.scrollListener)},beforeDestroy:function(){window.removeEventListener("scroll",this.scrollListener)}},r=n,o=(e("3a75"),e("2877")),c=Object(o["a"])(r,i,s,!1,null,null,null);a["a"]=c.exports},1799:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:1===t.pages.current_page}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.emitPages(t.pages.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(a,i){return e("li",{key:i,staticClass:"page-item",class:{active:a===t.pages.current_page}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.emitPages(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",class:{disabled:t.pages.current_page===t.pages.total_pages}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.emitPages(t.pages.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},s=[],n={name:"Pagination",props:{pages:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{emitPages:function(t){this.$emit("emitPages",t)}}},r=n,o=e("2877"),c=Object(o["a"])(r,i,s,!1,null,null,null);a["a"]=c.exports},2532:function(t,a,e){"use strict";var i=e("23e7"),s=e("5a34"),n=e("1d80"),r=e("ab13");i({target:"String",proto:!0,forced:!r("includes")},{includes:function(t){return!!~String(n(this)).indexOf(s(t),arguments.length>1?arguments[1]:void 0)}})},"3a75":function(t,a,e){"use strict";var i=e("cb92"),s=e.n(i);s.a},"44e7":function(t,a,e){var i=e("861d"),s=e("c6b6"),n=e("b622"),r=n("match");t.exports=function(t){var a;return i(t)&&(void 0!==(a=t[r])?!!a:"RegExp"==s(t))}},4923:function(t,a,e){"use strict";var i=e("cb69"),s=e.n(i);s.a},"5a34":function(t,a,e){var i=e("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"81b1":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"products"},[e("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}},[e("div",{staticClass:"loadingio-spinner-ripple-icelifeloading"},[e("div",{staticClass:"ldio-icelifeloading-style"},[e("div"),e("div")])])]),e("section",{staticClass:"products-banner mb-md-9 mb-5"}),e("div",{staticClass:"container"},[t.products.length>0?e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3 mb-4"},[e("div",{staticClass:"card font-weight-bold"},[e("ul",{staticClass:"list-group list-group-flush text-center"},[e("a",{staticClass:"list-group-item list-group-item-action ext-decoration-none",class:{active:""===t.filterCategory},attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.filterCategory=""}}},[t._v(" 全部商品 ")]),t._l(t.categories,(function(a){return e("a",{key:a,staticClass:"list-group-item list-group-item-action text-decoration-none",class:{active:a===t.filterCategory},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.filterCategory=a}}},[t._v(" "+t._s(a)+" ")])}))],2)])]),e("div",{staticClass:"col-md-9"},[e("div",{staticClass:"row"},t._l(t.filterCategories,(function(a){return e("div",{key:a.id,staticClass:"col-lg-4 mb-4"},[e("div",{staticClass:"card shadow-sm"},[e("img",{staticClass:"card-img-top",attrs:{src:a.imageUrl[0]}}),e("div",{staticClass:"card-body"},[e("span",{staticClass:"badge badge-cyan float-right ml-2"},[t._v(" "+t._s(a.category)+" ")]),e("router-link",{attrs:{to:"/product/"+a.id}},[e("h4",{staticClass:"card-title font-weight-bold text-primary"},[t._v(" "+t._s(a.title)+" ")])]),e("p",{staticClass:"card-text"},[t._v(t._s(a.content))]),e("p",{staticClass:"originprice card-text"},[t._v("原價："+t._s(a.origin_price)+" 元")]),e("h4",[t._v("特價："+t._s(a.price)+" 元")])],1),e("button",{staticClass:"addbtn btn-sm bg-primary text-light border-0",attrs:{type:"button",disabled:t.status.loadingItem===a.id},on:{click:function(e){return e.preventDefault(),t.addToCart(a.id)}}},[t.status.loadingItem===a.id?e("i",{staticClass:"spinner-grow spinner-grow-sm"}):t._e(),t._v(" 加到購物車 ")])])])})),0),e("Pagination",{staticClass:"mb-5",attrs:{pages:t.pagination},on:{emitPages:t.getProducts}})],1)]):t._e()]),e("ScrollTopArrow")],1)},s=[],n=(e("99af"),e("4de4"),e("caad"),e("2532"),e("1799")),r=e("047c"),o=e("dd4e"),c={name:"Products",components:{Pagination:n["a"],ScrollTopArrow:r["a"]},data:function(){return{pagination:{},products:[],carts:[],categories:["水果滋味","甜入你心","成熟午後"],filterCategory:"",isLoading:!1,status:{loadingItem:""}}},created:function(){this.getProducts()},methods:{getProducts:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e="".concat("https://course-ec-api.hexschool.io","/api/").concat("28ddc881-34aa-4322-95a0-a5ecbf863ad8","/ec/products?page=").concat(a);this.isLoading=!0,this.$http.get(e).then((function(a){t.products=a.data.data;var e=t.$route.params.categoryName;e&&(t.filterCategory=e),t.pagination=a.data.meta.pagination,t.isLoading=!1})).catch((function(){o["a"].fire({title:"取得商品列表失敗",icon:"error"})}))},addToCart:function(t){var a=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.status.loadingItem=t;var i="".concat("https://course-ec-api.hexschool.io","/api/").concat("28ddc881-34aa-4322-95a0-a5ecbf863ad8","/ec/shopping"),s={product:t,quantity:e};this.$http.post(i,s).then((function(){a.$bus.$emit("update-total"),a.status.loadingItem="",o["a"].fire({title:"已加入購物車!",icon:"success"})})).catch((function(t){var e=t.response.data.errors;e&&(o["a"].fire({title:"".concat(e),icon:"warning"}),a.status.loadingItem="")}))}},computed:{filterCategories:function(){var t=this;return this.filterCategory?this.products.filter((function(a){var e=a.category.toLowerCase().includes(t.filterCategory.toLowerCase());return e})):this.products}}},l=c,u=(e("4923"),e("2877")),d=Object(u["a"])(l,i,s,!1,null,null,null);a["default"]=d.exports},ab13:function(t,a,e){var i=e("b622"),s=i("match");t.exports=function(t){var a=/./;try{"/./"[t](a)}catch(e){try{return a[s]=!1,"/./"[t](a)}catch(i){}}return!1}},caad:function(t,a,e){"use strict";var i=e("23e7"),s=e("4d64").includes,n=e("44d2"),r=e("ae40"),o=r("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!o},{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n("includes")},cb69:function(t,a,e){},cb92:function(t,a,e){}}]);
//# sourceMappingURL=chunk-c286a328.1161ac97.js.map