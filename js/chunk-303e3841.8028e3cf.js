(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-303e3841"],{1065:function(t,i,s){},8933:function(t,i,s){"use strict";s.r(i);var a=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"wishlist"},[s("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(i){t.isLoading=i}}},[s("div",{staticClass:"loadingio-spinner-ripple-icelifeloading"},[s("div",{staticClass:"ldio-icelifeloading-style"},[s("div"),s("div")])])]),s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[0==t.wishProduct.length?s("div",{staticClass:"noneitem text-center mt-5 mb-4"},[s("h2",{staticClass:"font-weight-bold mb-4"},[t._v("您的願望清單還沒有任何商品！")]),s("i",{staticClass:"far fa-tired mb-5"}),s("br"),s("router-link",{staticClass:"btn btn-lg btn-primary rounded",attrs:{to:{name:"前台產品頁面"}}},[s("span",[t._v("來去逛逛")])])],1):t._e(),t.wishProduct.length>0?s("div",{staticClass:"mt-5"},[s("h3",{staticClass:"text-primary mb-4"},[t._v("我的願望清單")]),s("table",{staticClass:"table border-bottom"},[t._m(0),s("tbody",{staticClass:"wishlist-content"},t._l(t.wishProduct,(function(i){return s("tr",{key:i.id,staticClass:"text-center"},[s("td",[s("img",{staticClass:"wishlist-image",attrs:{src:i.imageUrl[0],alt:""}})]),s("td",[s("router-link",{attrs:{to:"/product/"+i.id}},[s("p",[s("strong",[t._v(t._s(i.title))])])])],1),s("td",[t._v(t._s(i.category))]),s("td",[t._v(t._s(t._f("currency")(i.price)))]),s("td",[s("button",{staticClass:"btn text-primary",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.addToCart(i.id)}}},[t.status.loadingItem===i.id?s("i",{staticClass:"fas fa-spinner fa-spin"}):s("i",{staticClass:"fa fa-cart-plus",attrs:{"aria-hidden":"true"}})])]),s("td",[s("button",{staticClass:"btn btn-outline-secondary btn-sm border-0",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.delWished(i.id)}}},[t._v(" X ")])])])})),0)])]):t._e()])])])],1)},e=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("thead",[s("tr",{staticClass:"table-primary text-center"},[s("th",{attrs:{scope:"col"}},[t._v("產品圖片")]),s("th",{attrs:{scope:"col"}},[t._v("產品名稱")]),s("th",{attrs:{scope:"col"}},[t._v("分類")]),s("th",{attrs:{scope:"col"}},[t._v("價格")]),s("th",{attrs:{scope:"col"}},[t._v("放入購物車")]),s("th",{attrs:{scope:"col"}},[t._v("刪除")])])])}],n=(s("99af"),s("4de4"),s("c975"),s("a434"),s("dd4e")),c={name:"WishList",data:function(){return{products:[],carts:[],wishProduct:[],wished:JSON.parse(localStorage.getItem("wishList"))||[],isLoading:!1,status:{loadingItem:""}}},created:function(){this.getProduct()},methods:{getProduct:function(){var t=this,i="".concat("https://course-ec-api.hexschool.io","/api/").concat("28ddc881-34aa-4322-95a0-a5ecbf863ad8","/ec/products");this.isLoading=!0,this.$http.get(i).then((function(i){t.products=i.data.data,console.log(t.products),t.getWish(),t.isLoading=!1})).catch((function(){n["a"].fire({title:"取不到願望清單資料",icon:"error"}),t.isLoading=!1}))},getWish:function(){var t=this;this.wishProduct=this.products.filter((function(i){return t.wished.indexOf(i.id)>-1}))},addToCart:function(t){var i=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.status.loadingItem=t;var a="".concat("https://course-ec-api.hexschool.io","/api/").concat("28ddc881-34aa-4322-95a0-a5ecbf863ad8","/ec/shopping"),e={product:t,quantity:s};this.$http.post(a,e).then((function(){i.$bus.$emit("update-total"),n["a"].fire({title:"已加入購物車!",icon:"success"}),i.status.loadingItem=""})).catch((function(t){var s=t.response.data.errors;s&&n["a"].fire({title:"".concat(s),icon:"warning"}),i.status.loadingItem=""}))},delWished:function(t){var i=this.wished.indexOf(t);-1!==i&&(this.wished.splice(i,1),this.getWish(),n["a"].fire({title:"已從願望清單刪除",icon:"success"})),localStorage.setItem("wishList",JSON.stringify(this.wished))}}},o=c,r=(s("ef65"),s("2877")),d=Object(r["a"])(o,a,e,!1,null,"096720bd",null);i["default"]=d.exports},c975:function(t,i,s){"use strict";var a=s("23e7"),e=s("4d64").indexOf,n=s("a640"),c=s("ae40"),o=[].indexOf,r=!!o&&1/[1].indexOf(1,-0)<0,d=n("indexOf"),l=c("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:r||!d||!l},{indexOf:function(t){return r?o.apply(this,arguments)||0:e(this,t,arguments.length>1?arguments[1]:void 0)}})},ef65:function(t,i,s){"use strict";var a=s("1065"),e=s.n(a);e.a}}]);
//# sourceMappingURL=chunk-303e3841.8028e3cf.js.map