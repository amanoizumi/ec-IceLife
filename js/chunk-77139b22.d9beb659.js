(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77139b22"],{2355:function(t,a,i){"use strict";i.r(a);var s=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"cart"},[i("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}},[i("div",{staticClass:"loadingio-spinner-ripple-icelifeloading"},[i("div",{staticClass:"ldio-icelifeloading-style"},[i("div"),i("div")])])]),i("div",{staticClass:"container"},[i("nav",{attrs:{"aria-label":"breadcrumb"}},[i("ol",{staticClass:"breadcrumb font-weight-bold pt-5 pb-4 bg-white"},[i("li",{staticClass:"breadcrumb-item"},[i("router-link",{attrs:{to:"/"}},[t._v("首頁")])],1),i("li",{staticClass:"breadcrumb-item"},[t._v(" 購物車 ")])])]),i("div",{staticClass:"mt-3 mb-5 row justify-content-center"},[i("div",{staticClass:"col-md-12"},[0===t.cart.length?i("div",{staticClass:"noneitem text-center mb-4"},[i("h2",{staticClass:"font-weight-bold mb-4"},[t._v("您的購物車還沒有任何商品！")]),i("i",{staticClass:"far fa-tired mb-5"}),i("br"),i("router-link",{staticClass:"btn btn-lg btn-primary rounded",attrs:{to:{name:"前台產品頁面"}}},[i("span",[t._v("來去逛逛")])])],1):t._e(),t.cart.length>0?i("div",{staticClass:"d-flex justify-content-between mb-3"},[i("div",{staticClass:"h3 text-primary"},[t._v("購物車明細")])]):t._e(),t.cart.length>0?i("div",{staticClass:"mb-1"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-8 col-sm-12 mb-4"},[t._m(0),t._l(t.cart,(function(a){return i("div",{key:a.id,staticClass:"row border-bottom border-gray"},[i("div",{staticClass:"col-4 d-flex align-items-center py-3"},[i("div",{staticClass:"pic-td align-middle",staticStyle:{width:"100px",height:"100px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+a.product.imageUrl[0]+")"}}),i("p",{staticClass:" ml-3"},[t._v(t._s(a.product.title))])]),i("div",{staticClass:"col-4 d-flex align-items-center"},[i("div",{staticClass:"input-group"},[i("div",{staticClass:"input-group-prepend"},[i("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",disabled:1===a.quantity},on:{click:function(i){return t.quantityUpdata(a.product.id,a.quantity-1)}}},[i("i",{staticClass:"fas fa-minus"})])]),i("input",{staticClass:"form-control text-center",attrs:{id:""+a.product.id,type:"text"},domProps:{value:a.quantity},on:{keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.quantityUpdata(a.product.id,i.target.value)}}}),i("div",{staticClass:"input-group-append"},[i("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(i){return t.quantityUpdata(a.product.id,a.quantity+1)}}},[i("i",{staticClass:"fas fa-plus"})])])])]),i("div",{staticClass:"col-4 d-flex justify-content-between align-items-center"},[i("div",{staticClass:"text-center"},[t._v(" NT"+t._s(t._f("currency")(a.product.price*a.quantity))+"元 ")]),i("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(i){return t.removeCartItem(a.product.id)}}},[i("i",{staticClass:"fas fa-times"})])])])}))],2),i("div",{staticClass:"col-md-4  col-sm-12"},[i("div",{staticClass:"order-detail border border-gray flex-column p-3 mb-4"},[t._m(1),i("div",{staticClass:"mb-3"},[i("h4",[t._v(" 總金額 NT"+t._s(t._f("currency")(t.cartTotal))+" 元 ")])]),t.cart.length>0?i("router-link",{staticClass:"btn btn-lg btn-block btn-primary",attrs:{to:{name:"訂單頁面"}}},[t._v("確認訂單 ")]):t._e()],1)])])]):t._e(),0!==t.cart.length?i("div",{staticClass:"d-flex justify-content-between"},[i("router-link",{staticClass:"btn btn-lg btn-outline-cyan",attrs:{to:{name:"前台產品頁面"}}},[i("i",{staticClass:"fas fa-arrow-circle-left"}),i("span",[t._v(" 繼續購物")])]),i("div",{staticClass:"text-right"},[t.cart.length>0?i("button",{staticClass:"btn btn-lg btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.removeAllCartItem()}}},[i("i",{staticClass:"far fa-trash-alt"},[t._v(" 刪除所有品項")])]):t._e()])],1):t._e()])])])],1)},e=[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"row font-weight-bold border-bottom border-gray pb-2"},[i("div",{staticClass:"col-4"},[t._v(" 商品 ")]),i("div",{staticClass:"col-4"},[t._v(" 數量 ")]),i("div",{staticClass:"col-4"},[t._v(" 價格 ")])])},function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"border-bottom border-gray mb-3"},[i("h3",{staticClass:"font-weight-bold"},[t._v("訂單細節")])])}],n=(i("99af"),i("4160"),i("159b"),i("dd4e")),c={name:"Cart",data:function(){return{cart:{},cartTotal:0,isLoading:!1}},methods:{getCart:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io","/api/").concat("28ddc881-34aa-4322-95a0-a5ecbf863ad8","/ec/shopping");this.$http.get(a).then((function(a){t.cart=a.data.data,t.cartTotal=0,t.cart.forEach((function(a){t.cartTotal+=a.product.price*a.quantity})),t.isLoading=!1})).catch((function(){n["a"].fire({title:"取得資料失敗!",icon:"error"}),t.isLoading=!1}))},quantityUpdata:function(t,a){var i=this;if(!(a<=0)){this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io","/api/").concat("28ddc881-34aa-4322-95a0-a5ecbf863ad8","/ec/shopping"),e={product:t,quantity:a};this.$http.patch(s,e).then((function(){i.isLoading=!1,i.getCart()})).catch((function(){n["a"].fire({title:"更新數量失敗!",icon:"error"}),i.isLoading=!1}))}},removeCartItem:function(t){var a=this;this.isLoading=!0;var i="".concat("https://course-ec-api.hexschool.io","/api/").concat("28ddc881-34aa-4322-95a0-a5ecbf863ad8","/ec/shopping/").concat(t);this.$http.delete(i).then((function(){a.isLoading=!1,a.$bus.$emit("update-total"),a.getCart()})).catch((function(){n["a"].fire({title:"移除商品失敗!",icon:"error"}),a.isLoading=!1}))},removeAllCartItem:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io","/api/").concat("28ddc881-34aa-4322-95a0-a5ecbf863ad8","/ec/shopping/all/product");this.$http.delete(a).then((function(){t.isLoading=!1,t.$bus.$emit("update-total"),t.getCart()})).catch((function(){n["a"].fire({title:"移除所有商品失敗!",icon:"error"}),t.isLoading=!1}))}},created:function(){this.getCart()}},r=c,o=(i("b956"),i("2877")),l=Object(o["a"])(r,s,e,!1,null,null,null);a["default"]=l.exports},"76e8":function(t,a,i){},b956:function(t,a,i){"use strict";var s=i("76e8"),e=i.n(s);e.a}}]);
//# sourceMappingURL=chunk-77139b22.d9beb659.js.map